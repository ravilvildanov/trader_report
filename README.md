# üìä Freedom Calculator

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±—Ä–æ–∫–µ—Ä—Å–∫–∏—Ö –æ—Ç—á—ë—Ç–æ–≤ –∏ —Ä–∞—Å—á—ë—Ç–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö** –∏–∑ Excel –∏ PDF —Ñ–∞–π–ª–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç** –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç
- **–ê–Ω–∞–ª–∏–∑ –ø–æ–∑–∏—Ü–∏–π** –ø–æ —Ç–∏–∫–µ—Ä–∞–º
- **–†–∞—Å—á—ë—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** –ø–æ –∑–∞–∫—Ä—ã—Ç—ã–º –ø–æ–∑–∏—Ü–∏—è–º
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤** –≤ CSV –∏ PDF —Ñ–æ—Ä–º–∞—Ç–∞—Ö
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ –æ—Å—Ç–∞—Ç–∫–∞** —Å –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ—à–ª–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –Ω–∞ Streamlit

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º **SOLID** –∏ **KISS** —Å –º–æ–¥—É–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:

```
src/
‚îú‚îÄ‚îÄ __init__.py                 # –ü–∞–∫–µ—Ç
‚îú‚îÄ‚îÄ font_manager.py             # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à—Ä–∏—Ñ—Ç–∞–º–∏ –¥–ª—è PDF
‚îú‚îÄ‚îÄ data_loaders.py             # –ó–∞–≥—Ä—É–∑—á–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö (Excel/PDF)
‚îú‚îÄ‚îÄ currency_rates_loader.py    # –ó–∞–≥—Ä—É–∑–∫–∞ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç
‚îú‚îÄ‚îÄ trade_data_processor.py     # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ—Ä–≥–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ trade_summary_calculator.py # –†–∞—Å—á—ë—Ç —Å–≤–æ–¥–æ–∫
‚îú‚îÄ‚îÄ negative_balance_handler.py # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ –æ—Å—Ç–∞—Ç–∫–∞
‚îú‚îÄ‚îÄ pdf_report_generator.py     # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –æ—Ç—á—ë—Ç–æ–≤
‚îî‚îÄ‚îÄ trade_report_processor.py   # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä
```

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <repository-url>
cd FreedomCalculator

# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv .venv
source .venv/bin/activate  # Linux/Mac
# –∏–ª–∏
.venv\Scripts\activate     # Windows

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt
```

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞

```bash
# –û—Å–Ω–æ–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
python main.py broker_report.xlsx currency_rates.xlsx --out output_dir

# –° –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ø—Ä–æ—à–ª–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞
python main.py broker_report.xlsx currency_rates.xlsx previous_report.xlsx --out output_dir
```

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```bash
# –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
streamlit run streamlit_app.py

# –° —É–∫–∞–∑–∞–Ω–∏–µ–º –ø–æ—Ä—Ç–∞
streamlit run streamlit_app.py --server.port 8080
```

### –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Streamlit Cloud

–î–ª—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –≤ –æ–±–ª–∞–∫–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `requirements_streamlit.txt` –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ [STREAMLIT_CLOUD_DEPLOY.md](STREAMLIT_CLOUD_DEPLOY.md).

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –í—Ö–æ–¥–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏
- **`–¢–∏–∫–µ—Ä`** - —Å–∏–º–≤–æ–ª —Ü–µ–Ω–Ω–æ–π –±—É–º–∞–≥–∏
- **`–û–ø–µ—Ä–∞—Ü–∏—è`** - —Ç–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏ (–ü–æ–∫—É–ø–∫–∞/–ü—Ä–æ–¥–∞–∂–∞)
- **`–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ`** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–µ–Ω–Ω—ã—Ö –±—É–º–∞–≥
- **`–¶–µ–Ω–∞`** - —Ü–µ–Ω–∞ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É
- **`–í–∞–ª—é—Ç–∞`** - –≤–∞–ª—é—Ç–∞ —Å–¥–µ–ª–∫–∏
- **`–°—É–º–º–∞`** - –æ–±—â–∞—è —Å—É–º–º–∞ —Å–¥–µ–ª–∫–∏
- **`–ö–æ–º–∏—Å—Å–∏—è`** - –∫–æ–º–∏—Å—Å–∏—è –∑–∞ —Å–¥–µ–ª–∫—É
- **`–í–∞–ª—é—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏`** - –≤–∞–ª—é—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏
- **`–î–∞—Ç–∞ —Å–¥–µ–ª–∫–∏`** - –¥–∞—Ç–∞ —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è —Å–¥–µ–ª–∫–∏
- **`–†–∞—Å—á–µ—Ç—ã`** - –¥–∞—Ç–∞ —Ä–∞—Å—á—ë—Ç–æ–≤

### –í—ã—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã
- **`details.csv`** - –¥–µ—Ç–∞–ª–∏ –≤—Å–µ—Ö —Å–¥–µ–ª–æ–∫ —Å —Ä–∞—Å—á—ë—Ç–∞–º–∏ –≤ —Ä—É–±–ª—è—Ö
- **`summary.csv`** - —Å–≤–æ–¥–∫–∞ –ø–æ –ø–æ–∑–∏—Ü–∏—è–º (–¢–∏–∫–µ—Ä, –û—Å—Ç–∞—Ç–æ–∫, –§–∏–Ω–∞–Ω—Å–æ–≤—ã–π_—Ä–µ–∑—É–ª—å—Ç–∞—Ç_–≤_—Ä—É–±)
- **`closed_summary.csv`** - —Å–≤–æ–¥–∫–∞ –ø–æ –∑–∞–∫—Ä—ã—Ç—ã–º –ø–æ–∑–∏—Ü–∏—è–º
- **`closed_report.pdf`** - PDF –æ—Ç—á—ë—Ç —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã

### `TradeReportProcessor`
–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏.

### `TradeDataProcessor`
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ—Ä–≥–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ, –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –≤—ã—á–∏—Å–ª—è–µ—Ç —Å—É–º–º—ã –≤ —Ä—É–±–ª—è—Ö.

### `TradeSummaryCalculator`
–í—ã—á–∏—Å–ª—è–µ—Ç —Å–≤–æ–¥–∫–∏ –ø–æ —Ç–∏–∫–µ—Ä–∞–º –∏ –∑–∞–∫—Ä—ã—Ç—ã–º –ø–æ–∑–∏—Ü–∏—è–º.

### `NegativeBalanceHandler`
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–∏–∫–µ—Ä—ã —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º –æ—Å—Ç–∞—Ç–∫–æ–º, –∏—Å–ø–æ–ª—å–∑—É—è –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—à–ª–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞.

### `PDFReportGenerator`
–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫—Ä–∞—Å–∏–≤—ã–µ PDF –æ—Ç—á—ë—Ç—ã —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã.

## üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –õ–æ–≥–∏–∫–∞ –ø–æ–¥—Å—á—ë—Ç–∞ –æ—Å—Ç–∞—Ç–∫–∞ –±—É–º–∞–≥
–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –≤ —Ä–∞—Å—á—ë—Ç–µ –æ—Å—Ç–∞—Ç–∫–∞:
- **–ü–æ–∫—É–ø–∫–∞** ‚Üí **+–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ** (–ø—Ä–∏–±–∞–≤–ª—è–µ–º –∫—É–ø–ª–µ–Ω–Ω—ã–µ –±—É–º–∞–≥–∏)
- **–ü—Ä–æ–¥–∞–∂–∞** ‚Üí **-–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ** (–≤—ã—á–∏—Ç–∞–µ–º –ø—Ä–æ–¥–∞–Ω–Ω—ã–µ –±—É–º–∞–≥–∏)

### –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏
–ö–æ–ª–æ–Ω–∫–∞ `–°–∞–ª—å–¥–æ` –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ –≤ `–û—Å—Ç–∞—Ç–æ–∫` –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è.

### –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞
–ú–µ—Ç–æ–¥ `handle_negative_balance` –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ `handle_negative_positions`.

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –¢–µ—Å—Ç –º–æ–¥—É–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
python test_modular_structure.py

# –¢–µ—Å—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
python main.py test_data/broker_report_new.xlsx test_data/currency_rates.xlsx --out test_output
```

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–µ–¥—ë—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- –†–∞—Å—á—ë—Ç —Å–≤–æ–¥–æ–∫
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ–± –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–º –æ—Å—Ç–∞—Ç–∫–µ

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** - –∫–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –æ–±–ª–∞—Å—Ç—å
- **–õ–µ–≥–∫–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** - –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏** - –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–º –º–æ–¥—É–ª–µ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ
- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å** - –∫–æ–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω –∏ –ø–æ–Ω—è—Ç–µ–Ω

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∫–æ–¥, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π —Å—Ç–∞—Ä—ã–π `process_trades.py`:

```python
# –ë—ã–ª–æ
from process_trades import TradeReportProcessor
processor = TradeReportProcessor(broker_path, rates_path, currency)

# –°—Ç–∞–ª–æ
from src.trade_report_processor import TradeReportProcessor
processor = TradeReportProcessor(broker_path, rates_path)
```

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- pandas
- openpyxl
- reportlab
- PyPDF2 –∏–ª–∏ pypdf
- streamlit (–¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞)

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
3. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT.

---

**Freedom Calculator** - –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –±—Ä–æ–∫–µ—Ä—Å–∫–∏—Ö –æ—Ç—á—ë—Ç–æ–≤! üöÄ